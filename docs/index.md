<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [pgmock][1]
    -   [Examples][2]
-   [add][3]
    -   [Parameters][4]
    -   [Examples][5]
-   [drop][6]
    -   [Parameters][7]
    -   [Examples][8]
-   [connect][9]
    -   [Examples][10]
    -   [query][11]
        -   [Parameters][12]
        -   [Examples][13]
    -   [release][14]
        -   [Examples][15]
    -   [end][16]
        -   [Examples][17]

## pgmock

An NPM module for mocking a connection to a PostgreSQL database.

### Examples

```javascript
const pgmock = require('pgmock'),
pgMock = pgmock();
```

**Meta**

-   **version**: 1.0.0
-   **author**: Jason Favrod &lt;mail@jasonfavrod.com>

## add

Add a query, it's value definitions, and response to the
mock database.

### Parameters

-   `query` **[string][18]** An SQL query statement.
-   `valueDefs` **[array][19]** Contains the types of each value used
    in the query.
-   `response` **[object][20]** The simulated expected response of
    the given query.

### Examples

```javascript
pgMock.add("SELECT * FROM employees WHERE id = $1", ['number'], {
    rowCount: 1,
    rows: [
        { id: 0, name: 'John Smith', position: 'application developer' }
    ]
});
```

## drop

Remove a query from the mock database.

### Parameters

-   `query` **[string][18]** An SQL statement added with the add method.

### Examples

```javascript
pgMock.drop("SELECT * FROM employees WHERE id = $1");
```

Returns **[boolean][21]** true if removal successful, false otherwise.

## connect

Get a simulated pg.Client or pg.Pool connection.

### Examples

```javascript
const conn = pgmock.connect();
```

Returns **[object][20]** 

### query

Query the mock database.

#### Parameters

-   `sql` **[string][18]** An SQL statement.
-   `values` **[array][19]** Arguments for the SQL statement or
    an empty array if no values in the statement.

#### Examples

```javascript
conn.query('select * from employees where id=$1;', [0])
.then(data => console.log(data))
.catch(err => console.log(err.message));
```

```javascript
{
  rowCount: 1,
  rows: [
      { id: 0, name: 'John Smith', position: 'application developer' } 
  ]
}
```

### release

Simulate releasing a pg connection.

#### Examples

```javascript
conn.release();
```

### end

Simulate ending a pg connection.

#### Examples

```javascript
conn.release();
```

[1]: #pgmock

[2]: #examples

[3]: #add

[4]: #parameters

[5]: #examples-1

[6]: #drop

[7]: #parameters-1

[8]: #examples-2

[9]: #connect

[10]: #examples-3

[11]: #query

[12]: #parameters-2

[13]: #examples-4

[14]: #release

[15]: #examples-5

[16]: #end

[17]: #examples-6

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[20]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
