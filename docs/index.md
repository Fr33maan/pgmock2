<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [pgmock2][1]
    -   [Examples][2]
-   [add][3]
    -   [Parameters][4]
    -   [Examples][5]
-   [drop][6]
    -   [Parameters][7]
    -   [Examples][8]
-   [dropAll][9]
    -   [Examples][10]
-   [toString][11]
    -   [Examples][12]
-   [connect][13]
    -   [Examples][14]
    -   [query][15]
        -   [Parameters][16]
        -   [Examples][17]
    -   [release][18]
        -   [Examples][19]
    -   [end][20]
        -   [Examples][21]

## pgmock2

An NPM module for mocking a connection to a PostgreSQL database.

### Examples

```javascript
const pgmock = require('pgmock2'),
pgMock = pgmock();
```

**Meta**

-   **version**: 1.0.0
-   **author**: Jason Favrod &lt;mail@jasonfavrod.com>

## add

Add a query, it's value definitions, and response to the
mock database.

### Parameters

-   `query` **[string][22]** An SQL query statement.
-   `valueDefs` **[array][23]** Contains the types of each value used
    in the query.
-   `response` **[object][24]** The simulated expected response of
    the given query.

### Examples

```javascript
pgMock.add("SELECT * FROM employees WHERE id = $1", ['number'], {
    rowCount: 1,
    rows: [
        { id: 0, name: 'John Smith', position: 'application developer' }
    ]
});
```

## drop

Remove a query from the mock database.

### Parameters

-   `query` **[string][22]** An SQL statement added with the add method.

### Examples

```javascript
pgMock.drop("SELECT * FROM employees WHERE id = $1");
```

Returns **[boolean][25]** true if removal successful, false otherwise.

## dropAll

Flushes the mock database.

### Examples

```javascript
pgMock.dropAll();
```

## toString

Return a string representation of the mock database.

### Examples

```javascript
pgMock.toString();
```

```javascript
{
    "3141ffa79e40392187830c52d0588f33": {
        "query": "SELECT * FROM tpd_hawaii_it.projects",
        "valDefs": [],
        "response": {
            "rowCount": 3,
            "rows": [
                {
                    "title": "Test Project 0",
                    "status": "pending",
                    "priority": "low",
                    "owner": "Favrod, Jason"
                },
                {
                    "title": "Test Project 1",
                    "status": "pending",
                    "priority": "low",
                    "owner": "Favrod, Jason"
                },
            ]
        }
    },
    "81c4b35dfd07db7dff2cb0e91228e833": {
        "query": "SELECT * FROM tpd_hawaii_it.projects WHERE title = $1",
        "valDefs": ["string"],
        "response": {
            "rowCount": 1,
            "rows": [
                {
                    "title": "Test Project 0",
                    "status": "pending",
                    "priority": "low",
                    "owner": "Favrod, Jason"
                }
            ]
        }
    }
}
```

## connect

Get a simulated pg.Client or pg.Pool connection.

### Examples

```javascript
const conn = pgmock.connect();
```

Returns **[object][24]** 

### query

Query the mock database.

#### Parameters

-   `sql` **[string][22]** An SQL statement.
-   `values` **[array][23]** Arguments for the SQL statement or
    an empty array if no values in the statement.

#### Examples

```javascript
conn.query('select * from employees where id=$1;', [0])
.then(data => console.log(data))
.catch(err => console.log(err.message));
```

```javascript
{
  rowCount: 1,
  rows: [
      { id: 0, name: 'John Smith', position: 'application developer' } 
  ]
}
```

### release

Simulate releasing a pg connection.

#### Examples

```javascript
conn.release();
```

### end

Simulate ending a pg connection.

#### Examples

```javascript
conn.release();
```

[1]: #pgmock2

[2]: #examples

[3]: #add

[4]: #parameters

[5]: #examples-1

[6]: #drop

[7]: #parameters-1

[8]: #examples-2

[9]: #dropall

[10]: #examples-3

[11]: #tostring

[12]: #examples-4

[13]: #connect

[14]: #examples-5

[15]: #query

[16]: #parameters-2

[17]: #examples-6

[18]: #release

[19]: #examples-7

[20]: #end

[21]: #examples-8

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[24]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[25]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
